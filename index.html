<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UMAIR.AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #chat {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            overflow-y: auto;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        #input-container {
            padding: 10px;
            background-color: #fff;
            border-top: 1px solid #ccc;
            position: sticky;
            bottom: 0;
            display: flex;
            gap: 10px;
        }
        #userInput {
            width: 80%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #response {
            margin-top: 20px;
            font-size: 1.2em;
            color: #333;
            text-align: left;
        }
        #history {
            margin-top: 20px;
            text-align: left;
            font-size: 0.9em;
            color: #666;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .user-message {
            color: #007bff;
            text-align: right;
        }
        .ai-message {
            color: #333;
            text-align: left;
        }
        .typing-animation {
            display: inline-block;
            overflow: hidden;
            border-right: 2px solid #333;
            white-space: nowrap;
            animation: typing 1s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #333; }
        }
    </style>
</head>
<body>
    <div id="chat">
        <h1>UMAIR.AI</h1>
        <div id="history">
            <h3>Chat History:</h3>
            <ul id="historyList"></ul>
        </div>
        <p id="response"></p>
    </div>
    <div id="input-container">
        <input type="text" id="userInput" placeholder="Type something and press Enter...">
        <button onclick="getResponse()">Send</button>
        <button onclick="clearHistory()">Clear History</button>
    </div>

    <script>
        const historyList = document.getElementById('historyList');
        const responseElement = document.getElementById('response');
        const chatContainer = document.getElementById('chat');
        const userInput = document.getElementById('userInput');

        // Load chat history from local storage
        let chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];

        // Display chat history
        function displayHistory() {
            historyList.innerHTML = ''; // Clear previous history
            chatHistory.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="message user-message">You: ${item.userInput}</div>
                    <div class="message ai-message">UMAIR.AI: ${item.response}</div>
                `;
                historyList.appendChild(li);
            });
            // Automatically scroll to the bottom
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Save chat history to local storage
        function saveToHistory(userInput, response) {
            chatHistory.push({ userInput, response });
            localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
            displayHistory();
        }

        // Clear chat history
        function clearHistory() {
            chatHistory = [];
            localStorage.removeItem('chatHistory');
            displayHistory();
        }

        // Predefined Responses with Contextual Logic (Urdu and English)
        const responses = [
            { 
                keywords: ["hello", "hi", "hey", "Ø³Ù„Ø§Ù…", "ÛÛŒÙ„Ùˆ"], 
                responses: [
                    "Hello! How can I assist you today?",
                    "Hi there! What's on your mind?",
                    "Hey! How can I help you?",
                    "Ø³Ù„Ø§Ù…! Ù…ÛŒÚº Ø¢Ù¾ Ú©ÛŒ Ú©Ø³ Ø·Ø±Ø­ Ù…Ø¯Ø¯ Ú©Ø± Ø³Ú©ØªØ§ ÛÙˆÚºØŸ",
                    "ÛÛŒÙ„Ùˆ! Ø¢Ù¾ Ú©ÛŒØ³Û’ ÛÛŒÚºØŸ"
                ]
            },
            { 
                keywords: ["how are you", "Ø¢Ù¾ Ú©ÛŒØ³Û’ ÛÙˆ", "Ú©ÛŒØ§ Ø­Ø§Ù„ ÛÛ’"], 
                responses: [
                    "I'm just a chatbot, but I'm doing great! How about you?",
                    "I'm fine, thank you! How can I help you today?",
                    "Ù…ÛŒÚº Ø§ÛŒÚ© Ú†Ø§Ù¹ Ø¨ÙˆÙ¹ ÛÙˆÚºØŒ Ù„ÛŒÚ©Ù† Ù…ÛŒÚº Ù¹Ú¾ÛŒÚ© ÛÙˆÚº! Ø¢Ù¾ Ú©ÛŒØ³Û’ ÛÛŒÚºØŸ",
                    "Ù…ÛŒÚº Ù¹Ú¾ÛŒÚ© ÛÙˆÚºØŒ Ø´Ú©Ø±ÛŒÛ! Ø¢Ø¬ Ù…ÛŒÚº Ø¢Ù¾ Ú©ÛŒ Ú©Ø³ Ø·Ø±Ø­ Ù…Ø¯Ø¯ Ú©Ø± Ø³Ú©ØªØ§ ÛÙˆÚºØŸ"
                ]
            },
            { 
                keywords: ["your name", "Ø¢Ù¾ Ú©Ø§ Ù†Ø§Ù… Ú©ÛŒØ§ ÛÛ’", "ØªÙ…ÛØ§Ø±Ø§ Ù†Ø§Ù… Ú©ÛŒØ§ ÛÛ’"], 
                responses: [
                    "My name is UMAIR.AI! Nice to meet you.",
                    "I'm UMAIR.AI, your personal assistant.",
                    "Ù…ÛŒØ±Ø§ Ù†Ø§Ù… UMAIR.AI ÛÛ’! Ø¢Ù¾ Ø³Û’ Ù…Ù„ Ú©Ø± Ø®ÙˆØ´ÛŒ ÛÙˆØ¦ÛŒÛ”",
                    "Ù…ÛŒÚº UMAIR.AI ÛÙˆÚºØŒ Ø¢Ù¾ Ú©Ø§ Ø°Ø§ØªÛŒ Ù…Ø¹Ø§ÙˆÙ†Û”"
                ]
            },
            { 
                keywords: ["bye", "goodbye", "Ø§Ù„ÙˆØ¯Ø§Ø¹", "Ø®Ø¯Ø§ Ø­Ø§ÙØ¸"], 
                responses: [
                    "Goodbye! Have a great day!",
                    "Bye! See you soon.",
                    "Ø§Ù„ÙˆØ¯Ø§Ø¹! Ø§ÛŒÚ© Ø§Ú†Ú¾Ø§ Ø¯Ù† Ú¯Ø²Ø§Ø±ÛŒÚº!",
                    "Ø®Ø¯Ø§ Ø­Ø§ÙØ¸! Ø¬Ù„Ø¯ Ù…Ù„ØªÛ’ ÛÛŒÚºÛ”"
                ]
            },
            { 
                keywords: ["joke", "Ù…Ø°Ø§Ù‚", "Ú†Ù¹Ú©Ù„Û"], 
                responses: [
                    "Why don't scientists trust atoms? Because they make up everything!",
                    "Why did the scarecrow win an award? Because he was outstanding in his field!",
                    "Ø³Ø§Ø¦Ù†Ø³Ø¯Ø§Ù† Ø§ÛŒÙ¹Ù… Ù¾Ø± Ú©ÛŒÙˆÚº Ø¨Ú¾Ø±ÙˆØ³Û Ù†ÛÛŒÚº Ú©Ø±ØªÛ’ØŸ Ú©ÛŒÙˆÙ†Ú©Û ÙˆÛ Ø³Ø¨ Ú©Ú†Ú¾ Ø¨Ù†Ø§ Ø¯ÛŒØªÛ’ ÛÛŒÚº!",
                    "Ø¨Ú¾ÙˆØª Ú©ÛŒÙˆÚº Ú©Ø§Ù…ÛŒØ§Ø¨ ÛÙˆØ§ØŸ Ú©ÛŒÙˆÙ†Ú©Û ÙˆÛ Ø§Ù¾Ù†Û’ Ú©Ú¾ÛŒØª Ù…ÛŒÚº Ù†Ù…Ø§ÛŒØ§Úº ØªÚ¾Ø§!"
                ]
            },
            { 
                keywords: ["weather", "Ù…ÙˆØ³Ù…", "Ø¢Ø¨ Ùˆ ÛÙˆØ§"], 
                responses: [
                    "I'm not connected to the internet, so I can't check the weather. But I hope it's nice outside!",
                    "I wish I could tell you the weather, but I'm just a chatbot. Maybe check your weather app?",
                    "Ù…ÛŒÚº Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ø³Û’ Ù…Ù†Ø³Ù„Ú© Ù†ÛÛŒÚº ÛÙˆÚºØŒ Ø§Ø³ Ù„ÛŒÛ’ Ù…ÙˆØ³Ù… Ú©ÛŒ Ø¬Ø§Ù†Ú† Ù†ÛÛŒÚº Ú©Ø± Ø³Ú©ØªØ§Û” Ù„ÛŒÚ©Ù† Ù…Ø¬Ú¾Û’ Ø§Ù…ÛŒØ¯ ÛÛ’ Ú©Û Ø¨Ø§ÛØ± Ú©Ø§ Ù…ÙˆØ³Ù… Ø§Ú†Ú¾Ø§ ÛÛ’!",
                    "Ú©Ø§Ø´ Ù…ÛŒÚº Ø¢Ù¾ Ú©Ùˆ Ù…ÙˆØ³Ù… Ø¨ØªØ§ Ø³Ú©ØªØ§ØŒ Ù„ÛŒÚ©Ù† Ù…ÛŒÚº ØµØ±Ù Ø§ÛŒÚ© Ú†Ø§Ù¹ Ø¨ÙˆÙ¹ ÛÙˆÚºÛ” Ø´Ø§ÛŒØ¯ Ø¢Ù¾ Ø§Ù¾Ù†Ø§ Ù…ÙˆØ³Ù… Ø§ÛŒÙ¾ Ú†ÛŒÚ© Ú©Ø±ÛŒÚºØŸ"
                ]
            },
            { 
                keywords: ["thank you", "thanks", "Ø´Ú©Ø±ÛŒÛ", "Ø´Ú©Ø±ÛŒÛ Ø¨ÛØª"], 
                responses: [
                    "You're welcome! ðŸ˜Š",
                    "No problem! Happy to help.",
                    "Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! ðŸ˜Š",
                    "Ú©ÙˆØ¦ÛŒ Ø¨Ø§Øª Ù†ÛÛŒÚº! Ù…Ø¯Ø¯ Ú©Ø± Ú©Û’ Ø®ÙˆØ´ÛŒ ÛÙˆØ¦ÛŒÛ”"
                ]
            },
            { 
                keywords: ["what can you do", "Ø¢Ù¾ Ú©ÛŒØ§ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº", "ØªÙ… Ú©ÛŒØ§ Ú©Ø± Ø³Ú©ØªÛ’ ÛÙˆ"], 
                responses: [
                    "I can chat with you, tell jokes, and answer simple questions. Try asking me something!",
                    "I'm here to help you with your queries. Feel free to ask me anything!",
                    "Ù…ÛŒÚº Ø¢Ù¾ Ø³Û’ Ø¨Ø§Øª Ú†ÛŒØª Ú©Ø± Ø³Ú©ØªØ§ ÛÙˆÚºØŒ Ú†Ù¹Ú©Ù„Û’ Ø³Ù†Ø§Ø¤ÚºØŒ Ø§ÙˆØ± Ø³Ø§Ø¯Û Ø³ÙˆØ§Ù„Ø§Øª Ú©Û’ Ø¬ÙˆØ§Ø¨ Ø¯Û’ Ø³Ú©ØªØ§ ÛÙˆÚºÛ” Ù…Ø¬Ú¾ Ø³Û’ Ú©Ú†Ú¾ Ù¾ÙˆÚ†Ú¾ Ú©Ø± Ø¯ÛŒÚ©Ú¾ÛŒÚº!",
                    "Ù…ÛŒÚº Ø¢Ù¾ Ú©Û’ Ø³ÙˆØ§Ù„Ø§Øª Ú©Û’ Ø¬ÙˆØ§Ø¨ Ø¯ÛŒÙ†Û’ Ú©Û’ Ù„ÛŒÛ’ ÛŒÛØ§Úº ÛÙˆÚºÛ” Ø¨Ù„Ø§ Ø¬Ú¾Ø¬Ú¾Ú© Ù…Ø¬Ú¾ Ø³Û’ Ú©Ú†Ú¾ Ø¨Ú¾ÛŒ Ù¾ÙˆÚ†Ú¾ÛŒÚº!"
                ]
            },
            { 
                keywords: ["tell me about yourself", "Ø§Ù¾Ù†Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ø¨ØªØ§Ø¤", "ØªÙ…ÛØ§Ø±Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ø¨ØªØ§Ø¤"], 
                responses: [
                    "I'm UMAIR.AI, a smart chatbot designed to help you with your queries. How can I assist you today?",
                    "I'm a chatbot created to make your life easier. Ask me anything!",
                    "Ù…ÛŒÚº UMAIR.AI ÛÙˆÚºØŒ Ø§ÛŒÚ© ÛÙˆØ´ÛŒØ§Ø± Ú†Ø§Ù¹ Ø¨ÙˆÙ¹ Ø¬Ùˆ Ø¢Ù¾ Ú©Û’ Ø³ÙˆØ§Ù„Ø§Øª Ú©Û’ Ø¬ÙˆØ§Ø¨ Ø¯ÛŒÙ†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û” Ø¢Ø¬ Ù…ÛŒÚº Ø¢Ù¾ Ú©ÛŒ Ú©Ø³ Ø·Ø±Ø­ Ù…Ø¯Ø¯ Ú©Ø± Ø³Ú©ØªØ§ ÛÙˆÚºØŸ",
                    "Ù…ÛŒÚº Ø§ÛŒÚ© Ú†Ø§Ù¹ Ø¨ÙˆÙ¹ ÛÙˆÚº Ø¬Ùˆ Ø¢Ù¾ Ú©ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ú©Ùˆ Ø¢Ø³Ø§Ù† Ø¨Ù†Ø§Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û” Ù…Ø¬Ú¾ Ø³Û’ Ú©Ú†Ú¾ Ø¨Ú¾ÛŒ Ù¾ÙˆÚ†Ú¾ÛŒÚº!"
                ]
            },
            { 
                keywords: ["who created you", "ØªÙ…ÛÛŒÚº Ú©Ø³ Ù†Û’ Ø¨Ù†Ø§ÛŒØ§", "Ø¢Ù¾ Ú©Ùˆ Ú©Ø³ Ù†Û’ Ø¨Ù†Ø§ÛŒØ§"], 
                responses: [
                    "I was created by a developer who loves building cool things with code!",
                    "A passionate developer built me to help people like you.",
                    "Ù…Ø¬Ú¾Û’ Ø§ÛŒÚ© ÚˆÙˆÛŒÙ„Ù¾Ø± Ù†Û’ Ø¨Ù†Ø§ÛŒØ§ ÛÛ’ Ø¬Ùˆ Ú©ÙˆÚˆ Ú©Û’ Ø³Ø§ØªÚ¾ Ø§Ú†Ú¾ÛŒ Ú†ÛŒØ²ÛŒÚº Ø¨Ù†Ø§Ù†Ø§ Ù¾Ø³Ù†Ø¯ Ú©Ø±ØªØ§ ÛÛ’!",
                    "Ø§ÛŒÚ© Ù¾Ø±Ø¬ÙˆØ´ ÚˆÙˆÛŒÙ„Ù¾Ø± Ù†Û’ Ù…Ø¬Ú¾Û’ Ø¢Ù¾ Ø¬ÛŒØ³Û’ Ù„ÙˆÚ¯ÙˆÚº Ú©ÛŒ Ù…Ø¯Ø¯ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ù†Ø§ÛŒØ§ ÛÛ’Û”"
                ]
            },
            { 
                keywords: ["help", "Ù…Ø¯Ø¯", "ÛÛŒÙ„Ù¾"], 
                responses: [
                    "Sure! You can ask me anything. For example, try asking 'Tell me a joke' or 'What can you do?'",
                    "I'm here to help! Just type your question, and I'll do my best to answer.",
                    "ÛŒÙ‚ÛŒÙ†Ø§Ù‹! Ø¢Ù¾ Ù…Ø¬Ú¾ Ø³Û’ Ú©Ú†Ú¾ Ø¨Ú¾ÛŒ Ù¾ÙˆÚ†Ú¾ Ø³Ú©ØªÛ’ ÛÛŒÚºÛ” Ù…Ø«Ø§Ù„ Ú©Û’ Ø·ÙˆØ± Ù¾Ø±ØŒ 'Ù…Ø¬Ú¾Û’ Ø§ÛŒÚ© Ú†Ù¹Ú©Ù„Û Ø³Ù†Ø§Ø¤' ÛŒØ§ 'Ø¢Ù¾ Ú©ÛŒØ§ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚºØŸ' Ù¾ÙˆÚ†Ú¾ Ú©Ø± Ø¯ÛŒÚ©Ú¾ÛŒÚºÛ”",
                    "Ù…ÛŒÚº Ù…Ø¯Ø¯ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ ÛŒÛØ§Úº ÛÙˆÚº! Ø¨Ø³ Ø§Ù¾Ù†Ø§ Ø³ÙˆØ§Ù„ Ù¹Ø§Ø¦Ù¾ Ú©Ø±ÛŒÚºØŒ Ø§ÙˆØ± Ù…ÛŒÚº Ø§Ù¾Ù†ÛŒ Ù¾ÙˆØ±ÛŒ Ú©ÙˆØ´Ø´ Ú©Ø±ÙˆÚº Ú¯Ø§ Ú©Û Ø¬ÙˆØ§Ø¨ Ø¯ÙˆÚºÛ”"
                ]
            },
            { 
                keywords: ["time", "ÙˆÙ‚Øª", "Ø§Ø¨ Ú©ÛŒØ§ ÙˆÙ‚Øª ÛÙˆØ§ ÛÛ’"], 
                responses: [
                    `The current time is ${new Date().toLocaleTimeString()}.`,
                    `It's ${new Date().toLocaleTimeString()} right now.`,
                    `Ø§Ø¨ Ú©Ø§ ÙˆÙ‚Øª ${new Date().toLocaleTimeString()} ÛÛ’Û”`,
                    `ÙÛŒ Ø§Ù„Ø­Ø§Ù„ ÙˆÙ‚Øª ${new Date().toLocaleTimeString()} ÛÛ’Û”`
                ]
            },
            { 
                keywords: ["date", "ØªØ§Ø±ÛŒØ®", "Ø¢Ø¬ Ú©ÛŒ ØªØ§Ø±ÛŒØ® Ú©ÛŒØ§ ÛÛ’"], 
                responses: [
                    `Today's date is ${new Date().toLocaleDateString()}.`,
                    `The date today is ${new Date().toLocaleDateString()}.`,
                    `Ø¢Ø¬ Ú©ÛŒ ØªØ§Ø±ÛŒØ® ${new Date().toLocaleDateString()} ÛÛ’Û”`,
                    `Ø¢Ø¬ Ú©ÛŒ ØªØ§Ø±ÛŒØ® ${new Date().toLocaleDateString()} ÛÛ’Û”`
                ]
            }
        ];

        // Self-learning data
        let learnedData = JSON.parse(localStorage.getItem('learnedData')) || {};

        // Find the best response
        function findResponse(userInput) {
            // Check learned data first
            if (learnedData[userInput]) {
                return learnedData[userInput];
            }

            // Check predefined responses
            for (const item of responses) {
                if (item.keywords.some(keyword => userInput.toLowerCase().includes(keyword))) {
                    return item.responses[Math.floor(Math.random() * item.responses.length)];
                }
            }

            // If no response is found, ask the user to teach the bot
            return "I'm sorry, I didn't understand that. Can you please teach me the correct response?";
        }

        // Handle user input and display response
        function getResponse() {
            const userInput = document.getElementById('userInput').value.trim();
            if (userInput === "") return;

            let response = findResponse(userInput);

            // If the bot doesn't know the response, ask the user to teach it
            if (response.includes("teach me")) {
                const correctResponse = prompt("I don't know how to respond. Please teach me the correct response:");
                if (correctResponse) {
                    learnedData[userInput] = correctResponse;
                    localStorage.setItem('learnedData', JSON.stringify(learnedData));
                    response = `Thank you! I've learned something new: "${correctResponse}".`;
                }
            }

            // Display the response
            responseElement.innerHTML = `<div class="message user-message">You: ${userInput}</div>
                                        <div class="message ai-message">UMAIR.AI: ${response}</div>`;

            // Save to history
            saveToHistory(userInput, response);

            // Clear input field
            document.getElementById('userInput').value = "";

            // Scroll to the bottom of the chat
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Handle Enter key press
        userInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                getResponse();
            }
        });

        // Display chat history on page load
        displayHistory();
    </script>
</body>
</html>